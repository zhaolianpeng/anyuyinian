# API接口文档总览

## 文档目录

本文档包含了完整的API接口文档，按功能模块分类：

### 1. 用户认证相关
- [微信登录接口](./wx_login_api.md) - 微信小程序登录认证

### 2. 首页相关
- [首页初始化接口](./home_init_api.md) - 获取首页轮播图、导航、服务、医院等数据

### 3. 文件管理
- [文件上传接口](./upload_api.md) - 图片和资料文件上传

### 4. 系统配置
- [平台配置接口](./config_api.md) - 获取系统配置信息

### 5. 用户管理
- [用户信息相关接口](./user_apis.md) - 用户信息、地址、就诊人管理

### 6. 服务管理
- [服务相关接口](./service_apis.md) - 服务列表、详情、表单配置

### 7. 订单管理
- [订单相关接口](./order_apis.md) - 订单提交、支付、取消、退款等

### 8. 推荐系统
- [推荐系统接口](./referral_apis.md) - 推广二维码、佣金管理、提现等

### 9. 客服医院
- [客服医院相关接口](./kefu_hospital_apis.md) - 客服咨询、FAQ、医院列表等

## 接口统计

| 模块 | 接口数量 | 主要功能 |
|------|----------|----------|
| 用户认证 | 1个 | 微信登录 |
| 首页相关 | 1个 | 首页数据初始化 |
| 文件管理 | 2个 | 文件上传、文件列表 |
| 系统配置 | 1个 | 平台配置获取 |
| 用户管理 | 4个 | 用户信息、地址、就诊人CRUD |
| 服务管理 | 3个 | 服务列表、详情、表单配置 |
| 订单管理 | 6个 | 订单全生命周期管理 |
| 推荐系统 | 4个 | 推广、佣金、提现 |
| 客服医院 | 4个 | 客服咨询、FAQ、医院管理 |
| **总计** | **26个** | **完整的医疗服务平台** |

## 技术栈

- **后端语言**: Go
- **数据库**: MySQL
- **ORM框架**: GORM
- **架构模式**: MVC分层架构
- **API风格**: RESTful API
- **数据格式**: JSON
- **认证方式**: 微信小程序登录

## 数据库表结构

| 表名 | 功能 | 记录数 |
|------|------|--------|
| Users | 用户信息 | 用户数量 |
| Banners | 轮播图 | 配置数量 |
| Navigations | 导航菜单 | 配置数量 |
| Services | 首页服务 | 配置数量 |
| Hospitals | 医院信息 | 医院数量 |
| Files | 文件管理 | 上传文件数 |
| Configs | 系统配置 | 配置项数 |
| UserAddresses | 用户地址 | 地址数量 |
| Patients | 就诊人信息 | 就诊人数 |
| ServiceItems | 服务项目 | 服务数量 |
| Orders | 订单信息 | 订单数量 |
| Referrals | 推荐关系 | 推荐数量 |
| Commissions | 佣金记录 | 佣金记录数 |
| Cashouts | 提现记录 | 提现记录数 |
| KefuMessages | 客服消息 | 消息数量 |
| Faqs | 常见问题 | FAQ数量 |

## 部署说明

### 环境要求
- Go 1.16+
- MySQL 5.7+
- 微信小程序AppID和AppSecret

### 配置项
- 数据库连接配置
- 微信小程序配置
- 文件上传路径配置
- 服务器端口配置

### 启动步骤
1. 创建数据库并导入表结构
2. 配置环境变量
3. 运行 `go mod tidy` 安装依赖
4. 运行 `go run main.go` 启动服务

## 测试说明

每个功能模块都提供了对应的测试脚本：
- `test_wx_login.sh` - 微信登录测试
- `test_home_init.sh` - 首页初始化测试
- `test_upload.sh` - 文件上传测试
- `test_user_apis.sh` - 用户相关接口测试
- `test_service_order_referral.sh` - 服务订单推荐测试
- `test_kefu_hospital.sh` - 客服医院接口测试

## 注意事项

1. **接口规范**: 所有接口都遵循统一的响应格式
2. **错误处理**: 包含完整的错误码和错误信息
3. **数据验证**: 所有输入参数都进行验证
4. **安全考虑**: 敏感信息加密存储，接口权限控制
5. **性能优化**: 支持分页查询，数据缓存
6. **日志记录**: 完整的操作日志记录
7. **文档更新**: 接口变更时及时更新文档

## 联系方式

如有问题或建议，请联系开发团队。 